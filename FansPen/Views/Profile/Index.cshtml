@using Microsoft.AspNetCore.Mvc.Localization
@model ApplicationUserViewModel

@inject IViewLocalizer Localizer
@inject SignInManager<ApplicationUser> SignInManager
@inject UserManager<ApplicationUser> UserManager

@{
    ViewData["Title"] = Model.UserName;
}

<div class="contentMain">
    <div class="col-sm-3 fixed-info-profile">
        <div id="mainAvatar">
            <a id="avatarPhoto"><img id="avatarUser" src="@Model.AvatarUrl" /></a>
        </div>
        <h3>@Model.UserName</h3>
        <h5>@Model.Email</h5>
        <h5 class="small-text">@Model.RegistrationDate</h5>
        @if (UserManager.GetUserId(User) == Model.Id)
        {
            <a href="/FanficBuilder" id="newFanficButton" class="btn btn-block btn-success">@Localizer["NewFanfic"]</a>
        }
        <hr />
    </div>
    <div class="col-sm-8 col-sm-offset-3">
        <ul class="nav nav-tabs" id="menuProfile">
            <li class="active">
                <a href="#profileData" data-toggle="tab" aria-expanded="true">
                    @if (UserManager.GetUserId(User) == Model.Id)
                    {
                        @Localizer["MyInfo"]
                    }
                    else
                    {
                        @Localizer["Info"]
                    }
                </a>
            </li>
            <li class="">
                <a href="#fanficsData" data-toggle="tab" aria-expanded="false">
                    @if (UserManager.GetUserId(User) == Model.Id)
                    {
                        @Localizer["MyFanfics"]
                    }
                    else
                    {
                        @Localizer["Fanfics"]
                    }
                </a>
            </li>
        </ul>
        <br>
        <div id="myTabContent" class="tab-content">
            <div class="tab-pane fade active in" id="profileData">
                <div class="col-xs-12">
                    @{
                        var changeble = UserManager.GetUserId(User) == Model.Id ? "changeble" : "";
                        <label class="control-label label-profile">@Localizer["FirstName"]</label>
                        <div>
                            <h5 id="FirstName" class="@changeble">
                                @if (Model.FirstName.ToString() == "NotIndicated")
                                {
                                    @Localizer[Model.FirstName]
                                }
                                else
                                {
                                    @Model.FirstName
                                }
                            </h5>
                        </div>
                        <hr />
                        <label class="control-label label-profile">@Localizer["SecondName"]</label>
                        <div>
                            <h5 id="SecondName" class="@changeble">
                                @if (Model.SecondName.ToString() == "NotIndicated")
                                {
                                    @Localizer[Model.SecondName]
                                }
                                else
                                {
                                    @Model.SecondName
                                }
                            </h5>
                        </div>
                        <hr />
                        <label class="control-label label-profile">@Localizer["Sex"]</label>
                        <div>
                            <h5 id="Sex" class="@changeble">@Localizer[Model.Sex]</h5>
                        </div>
                        <hr />
                        <label class="control-label label-profile">@Localizer["AboutMe"]</label>
                        <div>
                            <h5 id="AboutMe" class="@changeble">
                                @if (Model.AboutMe.ToString() == "NotIndicated")
                                {
                                    @Localizer[Model.AboutMe]
                                }
                                else
                                {
                                    @Model.AboutMe
                                }
                            </h5>
                        </div>
                    }
                </div>
            </div>
            <div class="tab-pane fade" id="fanficsData">
                @*@if (UserManager.GetUserId(User) == Model.Id)
                {*@
                    <div class="col-sm-6">
                        <select class="form-control min-border-input" id="categoryProfile">
                            <option>@Localizer["All"]</option>
                            <option>@Localizer["Anime"]</option>
                            <option>@Localizer["Books"]</option>
                            <option>@Localizer["Games"]</option>
                            <option>@Localizer["Comics"]</option>
                            <option>@Localizer["Films"]</option>
                            <option>@Localizer["Other"]</option>
                        </select>
                    </div>
                    <div class="col-sm-6">
                        <select class="form-control min-border-input" id="popOrNewProfile">
                            <option>@Localizer["New"]</option>
                            <option>@Localizer["Popular"]</option>
                        </select>
                    </div>
                @*}*@
                <div class="col-xs-12" id="resultDivProfile">
                </div>
            </div>
        </div>
    </div>
</div>

@await Html.PartialAsync("_GetUserFanfics")
@if (UserManager.GetUserId(User) == Model.Id)
{
    @await Html.PartialAsync("_UploadPhoto")
    @await Html.PartialAsync("_ChangeProfile")
}